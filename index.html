<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åƒé‡Œå‘½ç¨¿ - å‘½ç†å­¦ä¹ æ¸¸æˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .header {
            background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%);
            padding: 25px 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            margin-bottom: 25px;
        }

        .title {
            font-size: 24px;
            font-weight: 700;
            color: #27ae60;
            margin-bottom: 8px;
        }

        .subtitle {
            font-size: 13px;
            color: #7f8c8d;
        }

        .progress-section {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .progress-item {
            flex: 1;
            background: #f8f9fa;
            padding: 12px 15px;
            border-radius: 12px;
            text-align: center;
        }

        .progress-value {
            font-size: 22px;
            font-weight: 700;
            color: #27ae60;
            margin-bottom: 4px;
        }

        .progress-label {
            font-size: 11px;
            color: #95a5a6;
        }

        .level-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .level-card {
            background: rgba(255,255,255,0.95);
            padding: 20px 15px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .level-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .level-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .level-title {
            font-size: 12px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 6px;
        }

        .level-stars {
            font-size: 14px;
            color: #f39c12;
        }

        .star.empty {
            opacity: 0.3;
        }

        .quiz-container {
            display: none;
            background: rgba(255,255,255,0.98);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
        }

        .quiz-container.active {
            display: block;
        }

        .question-text {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .options-grid {
            display: grid;
            gap: 12px;
            margin-bottom: 20px;
        }

        .option-btn {
            padding: 16px 20px;
            font-size: 15px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #34495e;
            font-weight: 500;
        }

        .option-btn:hover {
            background: #f8f9fa;
            border-color: #3498db;
        }

        .option-btn.correct {
            background: #d5f5e3;
            border-color: #27ae60;
            color: #27ae60;
        }

        .option-btn.wrong {
            background: #fadbd8;
            border-color: #e74c3c;
            color: #e74c3c;
        }

        .option-btn:disabled {
            cursor: not-allowed;
        }

        .quiz-progress {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .quiz-progress-bar {
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            height: 100%;
            transition: width 0.3s ease;
            width: 0%;
        }

        .feedback {
            padding: 16px 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            font-size: 15px;
            font-weight: 600;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #d5f5e3;
            color: #27ae60;
            border: 2px solid #27ae60;
        }

        .feedback.wrong {
            background: #fadbd8;
            color: #e74c3c;
            border: 2px solid #e74c3c;
        }

        .next-btn {
            width: 100%;
            padding: 14px;
            font-size: 16px;
            font-weight: 600;
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: none;
        }

        .next-btn.show {
            display: block;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39,174,96,0.3);
        }

        .knowledge-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
            display: none;
            border-left: 4px solid #27ae60;
        }

        .knowledge-card.show {
            display: block;
        }

        .knowledge-title {
            font-size: 16px;
            font-weight: 700;
            color: #27ae60;
            margin-bottom: 12px;
        }

        .knowledge-content {
            font-size: 14px;
            color: #495057;
            line-height: 1.7;
            margin-bottom: 12px;
        }

        .knowledge-extra {
            background: rgba(255,255,255,0.7);
            padding: 15px;
            border-radius: 10px;
            font-size: 13px;
            color: #6c757d;
            line-height: 1.6;
        }

        .knowledge-extra table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
        }

        .knowledge-extra th,
        .knowledge-extra td {
            padding: 6px 8px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        .knowledge-extra th {
            background: rgba(39,174,96,0.1);
            color: #27ae60;
            font-weight: 600;
        }

        .result-screen {
            display: none;
            background: rgba(255,255,255,0.98);
            padding: 40px 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
        }

        .result-screen.show {
            display: block;
        }

        .result-stars {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .result-message {
            font-size: 22px;
            font-weight: 700;
            color: #27ae60;
            margin-bottom: 10px;
        }

        .result-score {
            font-size: 48px;
            font-weight: 700;
            color: #3498db;
            margin-bottom: 10px;
        }

        .continue-btn {
            margin-top: 25px;
            padding: 14px 40px;
            font-size: 16px;
            font-weight: 600;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .continue-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52,152,219,0.3);
        }

        @media (max-width: 600px) {
            .progress-section {
                gap: 10px;
            }
            
            .progress-value {
                font-size: 18px;
            }
            
            .question-text {
                font-size: 16px;
            }
            
            .option-btn {
                padding: 14px 16px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="title">åƒé‡Œå‘½ç¨¿</div>
            <p class="subtitle">æ¯æ—¥å‘½ç†å­¦ä¹ Â·å¾ªåºæ¸è¿›æŒæ¡å…«å­—æ™ºæ…§</p>

            <div class="progress-section">
                <div class="progress-item">
                    <div class="progress-value" id="totalPoints">0</div>
                    <div class="progress-label">æ€»ç§¯åˆ†</div>
                </div>
                <div class="progress-item">
                    <div class="progress-value" id="levelsCompleted">0/12</div>
                    <div class="progress-label">å®Œæˆå…³å¡</div>
                </div>
                <div class="progress-item">
                    <div class="progress-value" id="accuracy">0%</div>
                    <div class="progress-label">æ­£ç¡®ç‡</div>
                </div>
            </div>
        </div>

        <div class="level-grid" id="levelGrid">
            <!-- å…³å¡å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
        </div>

        <div class="quiz-container" id="quizContainer">
            <div class="question-text" id="questionText"></div>
            <div class="options-grid" id="optionsGrid"></div>
            <div class="quiz-progress">
                <div class="quiz-progress-bar" id="quizProgressBar"></div>
            </div>
            <div class="feedback" id="feedback"></div>
            <button class="next-btn" id="nextBtn">ç»§ç»­</button>
            <div class="knowledge-card" id="knowledgeCard">
                <div class="knowledge-title">ğŸ’¡ çŸ¥è¯†è¯¦è§£</div>
                <div class="knowledge-content" id="knowledgeContent"></div>
                <div class="knowledge-extra" id="knowledgeExtra"></div>
            </div>
        </div>

        <div class="result-screen" id="resultScreen">
            <div class="result-stars" id="resultStars">â­â­â­</div>
            <div class="result-message" id="resultMessage">å¤ªæ£’äº†!</div>
            <div class="result-score" id="resultScore">100</div>
            <p style="color: #777; margin-bottom: 20px;">ç§¯åˆ†</p>
            <button class="continue-btn" id="continueBtn">ç»§ç»­å­¦ä¹ </button>
        </div>
    </div>

    <script>
        // æ ¹æ®ã€Šåƒé‡Œå‘½ç¨¿ã€‹åŸæ–‡è®¾è®¡é¢˜ç›®åº“
        
        // å‘½ç†çŸ¥è¯†åº“ - æ‰©å±•çŸ¥è¯†ç‚¹
        const destinyKnowledge = {
            tenStems: [
                { name: 'ç”²', five: 'æœ¨', yinyang: 'é˜³', desc: 'ç”²ä¸ºé˜³æœ¨ï¼Œå¦‚å‚å¤©å¤§æ ‘ï¼Œä»£è¡¨ç”Ÿæœºå‹ƒå‘' },
                { name: 'ä¹™', five: 'æœ¨', yinyang: 'é˜´', desc: 'ä¹™ä¸ºé˜´æœ¨ï¼Œå¦‚èŠ±è‰è—¤è”“ï¼Œä»£è¡¨æŸ”éŸ§ç”Ÿé•¿' },
                { name: 'ä¸™', five: 'ç«', yinyang: 'é˜³', desc: 'ä¸™ä¸ºé˜³ç«ï¼Œå¦‚å¤ªé˜³ä¹‹å…‰ï¼Œä»£è¡¨å…‰æ˜æ¸©æš–' },
                { name: 'ä¸', five: 'ç«', yinyang: 'é˜´', desc: 'ä¸ä¸ºé˜´ç«ï¼Œå¦‚ç¯çƒ›ä¹‹æ˜ï¼Œä»£è¡¨ç»†è…»æ¸©æš–' },
                { name: 'æˆŠ', five: 'åœŸ', yinyang: 'é˜³', desc: 'æˆŠä¸ºé˜³åœŸï¼Œå¦‚é«˜å±±ä¹‹çŸ³ï¼Œä»£è¡¨åšé‡ç¨³é‡' },
                { name: 'å·±', five: 'åœŸ', yinyang: 'é˜´', desc: 'å·±ä¸ºé˜´åœŸï¼Œå¦‚ç”°å›­ä¹‹æ³¥ï¼Œä»£è¡¨æ¸©å’ŒåŒ…å®¹' },
                { name: 'åºš', five: 'é‡‘', yinyang: 'é˜³', desc: 'åºšä¸ºé˜³é‡‘ï¼Œå¦‚åˆ€å‰‘ä¹‹é”‹ï¼Œä»£è¡¨åˆšå¼ºæœ‰åŠ›' },
                { name: 'è¾›', five: 'é‡‘', yinyang: 'é˜´', desc: 'è¾›ä¸ºé˜´é‡‘ï¼Œå¦‚é¦–é¥°ä¹‹é¥°ï¼Œä»£è¡¨ç²¾ç¾ç»†è‡´' },
                { name: 'å£¬', five: 'æ°´', yinyang: 'é˜³', desc: 'å£¬ä¸ºé˜³æ°´ï¼Œå¦‚æ±Ÿæ²³æ¹–æµ·ï¼Œä»£è¡¨å¥”æµä¸æ¯' },
                { name: 'ç™¸', five: 'æ°´', yinyang: 'é˜´', desc: 'ç™¸ä¸ºé˜´æ°´ï¼Œå¦‚é›¨éœ²éœœé›ªï¼Œä»£è¡¨æ¶¦æ³½æ»‹å…»' }
            ],
            
            twelveBranches: [
                { name: 'å­', five: 'æ°´', month: 'åä¸€æœˆ', season: 'å†¬', yinyang: 'é˜³', desc: 'å­ä¸ºé¼ ï¼Œæ°´æ—ºä¹‹æ—¶ï¼Œé˜³æ°”åˆç”Ÿ' },
                { name: 'ä¸‘', five: 'åœŸ', month: 'åäºŒæœˆ', season: 'å†¬', yinyang: 'é˜´', desc: 'ä¸‘ä¸ºç‰›ï¼ŒåœŸæ—ºä¹‹æ—¶ï¼Œå¯’å†·å°è—' },
                { name: 'å¯…', five: 'æœ¨', month: 'æ­£æœˆ', season: 'æ˜¥', yinyang: 'é˜³', desc: 'å¯…ä¸ºè™ï¼Œæœ¨æ—ºä¹‹æ—¶ï¼Œä¸‡ç‰©èŒå‘' },
                { name: 'å¯', five: 'æœ¨', month: 'äºŒæœˆ', season: 'æ˜¥', yinyang: 'é˜´', desc: 'å¯ä¸ºå…”ï¼Œæœ¨æ—ºä¹‹æ—¶ï¼Œç”Ÿæœºå‹ƒå‹ƒ' },
                { name: 'è¾°', five: 'åœŸ', month: 'ä¸‰æœˆ', season: 'æ˜¥', yinyang: 'é˜³', desc: 'è¾°ä¸ºé¾™ï¼ŒåœŸæ—ºä¹‹æ—¶ï¼Œæ˜¥æ„ç›ç„¶' },
                { name: 'å·³', five: 'ç«', month: 'å››æœˆ', season: 'å¤', yinyang: 'é˜³', desc: 'å·³ä¸ºè›‡ï¼Œç«æ—ºä¹‹æ—¶ï¼Œç‚å¤åˆä¸´' },
                { name: 'åˆ', five: 'ç«', month: 'äº”æœˆ', season: 'å¤', yinyang: 'é˜´', desc: 'åˆä¸ºé©¬ï¼Œç«æ—ºä¹‹æ—¶ï¼Œç››å¤é…·çƒ­' },
                { name: 'æœª', five: 'åœŸ', month: 'å…­æœˆ', season: 'å¤', yinyang: 'é˜´', desc: 'æœªä¸ºç¾Šï¼ŒåœŸæ—ºä¹‹æ—¶ï¼Œå¤æœ«ç§‹åˆ' },
                { name: 'ç”³', five: 'é‡‘', month: 'ä¸ƒæœˆ', season: 'ç§‹', yinyang: 'é˜³', desc: 'ç”³ä¸ºçŒ´ï¼Œé‡‘æ—ºä¹‹æ—¶ï¼Œç§‹é«˜æ°”çˆ½' },
                { name: 'é…‰', five: 'é‡‘', month: 'å…«æœˆ', season: 'ç§‹', yinyang: 'é˜´', desc: 'é…‰ä¸ºé¸¡ï¼Œé‡‘æ—ºä¹‹æ—¶ï¼Œé‡‘ç§‹ç¡•æœ' },
                { name: 'æˆŒ', five: 'åœŸ', month: 'ä¹æœˆ', season: 'ç§‹', yinyang: 'é˜³', desc: 'æˆŒä¸ºç‹—ï¼ŒåœŸæ—ºä¹‹æ—¶ï¼Œç§‹æ„æµ“åš' },
                { name: 'äº¥', five: 'æ°´', month: 'åæœˆ', season: 'å†¬', yinyang: 'é˜³', desc: 'äº¥ä¸ºçŒªï¼Œæ°´æ—ºä¹‹æ—¶ï¼Œå†¬å¯’åˆé™' }
            ],

            seasonMap: {
                'æ˜¥': ['å¯…æœˆ(æ­£æœˆ)', 'å¯æœˆ(äºŒæœˆ)', 'è¾°æœˆ(ä¸‰æœˆ)'],
                'å¤': ['å·³æœˆ(å››æœˆ)', 'åˆæœˆ(äº”æœˆ)', 'æœªæœˆ(å…­æœˆ)'],
                'ç§‹': ['ç”³æœˆ(ä¸ƒæœˆ)', 'é…‰æœˆ(å…«æœˆ)', 'æˆŒæœˆ(ä¹æœˆ)'],
                'å†¬': ['äº¥æœˆ(åæœˆ)', 'å­æœˆ(åä¸€æœˆ)', 'ä¸‘æœˆ(åäºŒæœˆ)']
            },

            fiveElements: {
                'é‡‘': { desc: 'é‡‘ä¸»åˆšå¼ºï¼Œä»£è¡¨å˜é©ã€å†³æ–­ã€æ³•å¾‹', season: 'ç§‹', color: 'ç™½' },
                'æœ¨': { desc: 'æœ¨ä¸»ç”Ÿé•¿ï¼Œä»£è¡¨ç”Ÿæœºã€åˆ›é€ ã€ä»çˆ±', season: 'æ˜¥', color: 'é’' },
                'æ°´': { desc: 'æ°´ä¸»æ™ºæ…§ï¼Œä»£è¡¨æµåŠ¨ã€é€‚åº”ã€å­¦ä¹ ', season: 'å†¬', color: 'é»‘' },
                'ç«': { desc: 'ç«ä¸»çƒ­æƒ…ï¼Œä»£è¡¨å…‰æ˜ã€ç¤¼è²Œã€æ–‡æ˜', season: 'å¤', color: 'çº¢' },
                'åœŸ': { desc: 'åœŸä¸»è¯šä¿¡ï¼Œä»£è¡¨ç¨³é‡ã€åŒ…å®¹ã€æ‰¿è½½', season: 'å››å­£æœ«', color: 'é»„' }
            },
            
            stemCombination: {
                'ç”²å·±': { five: 'åœŸ', desc: 'ç”²å·±åˆåŒ–åœŸã€‚ç”²ä¸ºé˜³æœ¨ï¼Œå·±ä¸ºé˜´åœŸï¼Œæœ¨å…‹åœŸè€ŒåŒ–åœŸ' },
                'ä¹™åºš': { five: 'é‡‘', desc: 'ä¹™åºšåˆåŒ–é‡‘ã€‚ä¹™ä¸ºé˜´æœ¨ï¼Œåºšä¸ºé˜³é‡‘ï¼Œé‡‘å…‹æœ¨è€ŒåŒ–é‡‘' },
                'ä¸™è¾›': { five: 'æ°´', desc: 'ä¸™è¾›åˆåŒ–æ°´ã€‚ä¸™ä¸ºé˜³ç«ï¼Œè¾›ä¸ºé˜´é‡‘ï¼Œç«å…‹é‡‘è€ŒåŒ–æ°´' },
                'ä¸å£¬': { five: 'æœ¨', desc: 'ä¸å£¬åˆåŒ–æœ¨ã€‚ä¸ä¸ºé˜´ç«ï¼Œå£¬ä¸ºé˜³æ°´ï¼Œæ°´å…‹ç«è€ŒåŒ–æœ¨' },
                'æˆŠç™¸': { five: 'ç«', desc: 'æˆŠç™¸åˆåŒ–ç«ã€‚æˆŠä¸ºé˜³åœŸï¼Œç™¸ä¸ºé˜´æ°´ï¼ŒåœŸå…‹æ°´è€ŒåŒ–ç«' }
            },

            branchTripleCombination: {
                'ç”³å­è¾°': { five: 'æ°´', desc: 'ç”³å­è¾°ä¸‰åˆæ°´å±€ã€‚ç”³ä¸ºé‡‘ï¼Œå­ä¸ºæ°´ï¼Œè¾°ä¸ºåœŸï¼Œé‡‘æ°´ç›¸ç”Ÿè€ŒåŒ–æ°´' },
                'å·³é…‰ä¸‘': { five: 'é‡‘', desc: 'å·³é…‰ä¸‘ä¸‰åˆé‡‘å±€ã€‚å·³ä¸ºç«ï¼Œé…‰ä¸ºé‡‘ï¼Œä¸‘ä¸ºåœŸï¼Œç«åœŸé‡‘ç›¸ç”Ÿè€ŒåŒ–é‡‘' },
                'äº¥å¯æœª': { five: 'æœ¨', desc: 'äº¥å¯æœªä¸‰åˆæœ¨å±€ã€‚äº¥ä¸ºæ°´ï¼Œå¯ä¸ºæœ¨ï¼Œæœªä¸ºåœŸï¼Œæ°´æœ¨ç›¸ç”Ÿè€ŒåŒ–æœ¨' },
                'å¯…åˆæˆŒ': { five: 'ç«', desc: 'å¯…åˆæˆŒä¸‰åˆç«å±€ã€‚å¯…ä¸ºæœ¨ï¼Œåˆä¸ºç«ï¼ŒæˆŒä¸ºåœŸï¼Œæœ¨ç«åœŸç›¸ç”Ÿè€ŒåŒ–ç«' }
            },

            branchSixCombination: {
                'å­ä¸‘': { desc: 'å­ä¸‘ç›¸åˆã€‚å­ä¸ºæ°´ï¼Œä¸‘ä¸ºåœŸï¼ŒåœŸå…‹æ°´ï¼Œç›¸åˆåŒ–åœŸ' },
                'å¯…äº¥': { desc: 'å¯…äº¥ç›¸åˆã€‚å¯…ä¸ºæœ¨ï¼Œäº¥ä¸ºæ°´ï¼Œæ°´ç”Ÿæœ¨ï¼Œç›¸åˆåŒ–æœ¨' },
                'å¯æˆŒ': { desc: 'å¯æˆŒç›¸åˆã€‚å¯ä¸ºæœ¨ï¼ŒæˆŒä¸ºåœŸï¼Œæœ¨å…‹åœŸï¼Œç›¸åˆåŒ–ç«' },
                'è¾°é…‰': { desc: 'è¾°é…‰ç›¸åˆã€‚è¾°ä¸ºåœŸï¼Œé…‰ä¸ºé‡‘ï¼ŒåœŸç”Ÿé‡‘ï¼Œç›¸åˆåŒ–é‡‘' },
                'å·³ç”³': { desc: 'å·³ç”³ç›¸åˆã€‚å·³ä¸ºç«ï¼Œç”³ä¸ºé‡‘ï¼Œç«å…‹é‡‘ï¼Œç›¸åˆåŒ–æ°´' },
                'åˆæœª': { desc: 'åˆæœªç›¸åˆã€‚åˆä¸ºç«ï¼Œæœªä¸ºåœŸï¼Œç«ç”ŸåœŸï¼Œç›¸åˆåŒ–åœŸ' }
            },

            branchClash: {
                'å­åˆ': { desc: 'å­åˆç›¸å†²ã€‚å­ä¸ºæ°´ï¼Œåˆä¸ºç«ï¼Œæ°´ç«ç›¸å†²' },
                'ä¸‘æœª': { desc: 'ä¸‘æœªç›¸å†²ã€‚ä¸‘ä¸ºåœŸï¼Œæœªä¸ºåœŸï¼ŒåœŸä¸åœŸå†²' },
                'å¯…ç”³': { desc: 'å¯…ç”³ç›¸å†²ã€‚å¯…ä¸ºæœ¨ï¼Œç”³ä¸ºé‡‘ï¼Œé‡‘æœ¨ç›¸å†²' },
                'å¯é…‰': { desc: 'å¯é…‰ç›¸å†²ã€‚å¯ä¸ºæœ¨ï¼Œé…‰ä¸ºé‡‘ï¼Œé‡‘æœ¨ç›¸å†²' },
                'è¾°æˆŒ': { desc: 'è¾°æˆŒç›¸å†²ã€‚è¾°ä¸ºåœŸï¼ŒæˆŒä¸ºåœŸï¼ŒåœŸä¸åœŸå†²' },
                'å·³äº¥': { desc: 'å·³äº¥ç›¸å†²ã€‚å·³ä¸ºç«ï¼Œäº¥ä¸ºæ°´ï¼Œæ°´ç«ç›¸å†²' }
            }
        };

        // ç”Ÿæˆæ‰©å±•çŸ¥è¯†HTML
        function generateExtraKnowledge(extraType) {
            if (!extraType) return '';

            const knowledge = destinyKnowledge;
            let html = '';

            if (extraType === 'tenStems') {
                html += '<h4>ğŸ“Š åå¤©å¹²è¯¦è§£è¡¨</h4>';
                html += '<table><thead><tr><th>å¤©å¹²</th><th>äº”è¡Œ</th><th>é˜´é˜³</th><th>å«ä¹‰</th></tr></thead><tbody>';
                knowledge.tenStems.forEach(stem => {
                    html += `<tr><td>${stem.name}</td><td>${stem.five}</td><td>${stem.yinyang}</td><td>${stem.desc}</td></tr>`;
                });
                html += '</tbody></table>';
            } else if (extraType === 'twelveBranches') {
                html += '<h4>ğŸ“Š åäºŒåœ°æ”¯è¯¦è§£è¡¨</h4>';
                html += '<table><thead><tr><th>åœ°æ”¯</th><th>äº”è¡Œ</th><th>é˜´é˜³</th><th>æœˆä»½</th><th>å­£èŠ‚</th></tr></thead><tbody>';
                knowledge.twelveBranches.forEach(branch => {
                    html += `<tr><td>${branch.name}</td><td>${branch.five}</td><td>${branch.yinyang}</td><td>${branch.month}</td><td>${branch.season}</td></tr>`;
                });
                html += '</tbody></table>';
                
                html += '<h4>ğŸŒ å­£èŠ‚ä¸æœˆä»½å¯¹åº”è¡¨</h4>';
                html += '<table><thead><tr><th>å­£èŠ‚</th><th>åŒ…å«æœˆä»½</th></tr></thead><tbody>';
                Object.entries(knowledge.seasonMap).forEach(([season, months]) => {
                    html += `<tr><td>${season}å­£</td><td>${months.join('ã€')}</td></tr>`;
                });
                html += '</tbody></table>';
            } else if (extraType === 'stemCombination') {
                html += '<h4>ğŸ¤ å¤©å¹²åˆåŒ–è¯¦è§£è¡¨</h4>';
                html += '<table><thead><tr><th>åˆåŒ–</th><th>äº”è¡Œ</th><th>è¯´æ˜</th></tr></thead><tbody>';
                Object.entries(knowledge.stemCombination).forEach(([key, val]) => {
                    html += `<tr><td>${key}</td><td>${val.five}</td><td>${val.desc}</td></tr>`;
                });
                html += '</tbody></table>';
            } else if (extraType === 'branchTripleCombination') {
                html += '<h4>ğŸ”— åœ°æ”¯ä¸‰åˆè¯¦è§£è¡¨</h4>';
                html += '<table><thead><tr><th>ä¸‰åˆ</th><th>äº”è¡Œ</th><th>è¯´æ˜</th></tr></thead><tbody>';
                Object.entries(knowledge.branchTripleCombination).forEach(([key, val]) => {
                    html += `<tr><td>${key}</td><td>${val.five}</td><td>${val.desc}</td></tr>`;
                });
                html += '</tbody></table>';
            } else if (extraType === 'branchSixCombination') {
                html += '<h4>â¤ï¸ åœ°æ”¯å…­åˆè¯¦è§£è¡¨</h4>';
                html += '<table><thead><tr><th>å…­åˆ</th><th>è¯´æ˜</th></tr></thead><tbody>';
                Object.entries(knowledge.branchSixCombination).forEach(([key, val]) => {
                    html += `<tr><td>${key}</td><td>${val.desc}</td></tr>`;
                });
                html += '</tbody></table>';
            } else if (extraType === 'fiveElements') {
                html += '<h4>ğŸŒˆ äº”è¡Œè¯¦è§£è¡¨</h4>';
                html += '<table><thead><tr><th>äº”è¡Œ</th><th>ç‰¹æ€§</th><th>å­£èŠ‚</th><th>é¢œè‰²</th></tr></thead><tbody>';
                Object.entries(knowledge.fiveElements).forEach(([key, val]) => {
                    html += `<tr><td>${key}</td><td>${val.desc}</td><td>${val.season}</td><td>${val.color}</td></tr>`;
                });
                html += '</tbody></table>';
            }

            return html;
        }

        // å…³å¡æ•°æ® - æ ¹æ®ã€Šåƒé‡Œå‘½ç¨¿ã€‹åŸæ–‡è®¾è®¡
        const levels = [
            {
                id: 1,
                title: "å¤©å¹²åŸºç¡€",
                icon: "ğŸŒŸ",
                questions: [
                    {
                        question: "åå¤©å¹²ä¸­ï¼Œç”²ä¹™å±ä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["é‡‘", "æœ¨", "æ°´", "ç«"],
                        correct: 1,
                        knowledge: "ç”²ä¹™å¯…å¯çš†ä¸ºæœ¨ã€‚ç”²ä¸ºé˜³æœ¨ï¼Œä¹™ä¸ºé˜´æœ¨ï¼Œä»£è¡¨æ˜¥å¤©çš„ç”Ÿæœºã€‚",
                        extraType: "tenStems"
                    },
                    {
                        question: "ä¸™ä¸å±äºä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["ç«", "åœŸ", "é‡‘", "æ°´"],
                        correct: 0,
                        knowledge: "ä¸™ä¸å·³åˆçš†ä¸ºç«ã€‚ä¸™ä¸ºé˜³ç«ï¼Œå¦‚å¤ªé˜³ä¹‹å…‰ï¼›ä¸ä¸ºé˜´ç«ï¼Œå¦‚ç¯çƒ›ä¹‹æ˜ã€‚",
                        extraType: "tenStems"
                    },
                    {
                        question: "åºšè¾›ä»£è¡¨ä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["æœ¨", "ç«", "é‡‘", "åœŸ"],
                        correct: 2,
                        knowledge: "åºšè¾›ç”³é…‰çš†ä¸ºé‡‘ã€‚åºšä¸ºé˜³é‡‘ï¼Œå¦‚åˆ€å‰‘ï¼›è¾›ä¸ºé˜´é‡‘ï¼Œå¦‚é¦–é¥°ã€‚",
                        extraType: "tenStems"
                    },
                    {
                        question: "å£¬ç™¸å±äºä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["åœŸ", "æœ¨", "ç«", "æ°´"],
                        correct: 3,
                        knowledge: "å£¬ç™¸äº¥å­çš†ä¸ºæ°´ã€‚å£¬ä¸ºé˜³æ°´ï¼Œå¦‚æ±Ÿæ²³æ¹–æµ·ï¼›ç™¸ä¸ºé˜´æ°´ï¼Œå¦‚é›¨éœ²éœœé›ªã€‚",
                        extraType: "tenStems"
                    },
                    {
                        question: "æˆŠå·±å±äºä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["é‡‘", "æ°´", "æœ¨", "åœŸ"],
                        correct: 3,
                        knowledge: "æˆŠå·±è¾°æˆŒä¸‘æœªçš†ä¸ºåœŸã€‚æˆŠä¸ºé˜³åœŸï¼Œå¦‚é«˜å±±ï¼›å·±ä¸ºé˜´åœŸï¼Œå¦‚ç”°å›­ã€‚",
                        extraType: "tenStems"
                    },
                    {
                        question: "ç”²ä¸™æˆŠåºšå£¬å±äºä»€ä¹ˆé˜´é˜³ï¼Ÿ",
                        options: ["é˜³", "é˜´", "æ··åˆ", "ä¸ç¡®å®š"],
                        correct: 0,
                        knowledge: "ã€Šåƒé‡Œå‘½ç¨¿ã€‹åŸæ–‡ï¼šç”²ä¸™æˆŠåºšå£¬çš†ä¸ºé˜³ã€‚",
                        extraType: "tenStems"
                    },
                    {
                        question: "ä¹™ä¸å·±è¾›ç™¸å±äºä»€ä¹ˆé˜´é˜³ï¼Ÿ",
                        options: ["é˜³", "é˜´", "æ··åˆ", "ä¸ç¡®å®š"],
                        correct: 1,
                        knowledge: "ã€Šåƒé‡Œå‘½ç¨¿ã€‹åŸæ–‡ï¼šä¹™ä¸å·±è¾›ç™¸çš†ä¸ºé˜´ã€‚",
                        extraType: "tenStems"
                    }
                ]
            },
            {
                id: 2,
                title: "åœ°æ”¯åŸºç¡€",
                icon: "ğŸŒ™",
                questions: [
                    {
                        question: "å­æœˆå¯¹åº”å†œå†å‡ æœˆï¼Ÿ",
                        options: ["åä¸€æœˆ", "åäºŒæœˆ", "ä¸€æœˆ", "äºŒæœˆ"],
                        correct: 0,
                        knowledge: "å­æœˆä¸ºå†œå†åä¸€æœˆï¼Œæ˜¯ä¸€å¹´ä¹‹æœ«ï¼Œé˜³æ°”åˆç”Ÿä¹‹æ—¶ã€‚",
                        extraType: "twelveBranches"
                    },
                    {
                        question: "å¯…æœˆå±äºä»€ä¹ˆå­£èŠ‚ï¼Ÿ",
                        options: ["æ˜¥", "å¤", "ç§‹", "å†¬"],
                        correct: 0,
                        knowledge: "å¯…æœˆä¸ºå†œå†æ­£æœˆï¼Œå±äºæ˜¥å­£ï¼Œä¸‡ç‰©èŒå‘ä¹‹æ—¶ã€‚",
                        extraType: "seasons"
                    },
                    {
                        question: "ç”³æœˆå±äºä»€ä¹ˆå­£èŠ‚ï¼Ÿ",
                        options: ["æ˜¥", "å¤", "ç§‹", "å†¬"],
                        correct: 2,
                        knowledge: "ç”³æœˆä¸ºå†œå†ä¸ƒæœˆï¼Œç«‹ç§‹åå¼€å§‹ï¼Œæ˜¯ç§‹å­£çš„å¼€å§‹ï¼Œé‡‘æ°”æ¸æ—ºã€‚",
                        extraType: "seasons"
                    },
                    {
                        question: "äº¥æœˆå¯¹åº”ä»€ä¹ˆå­£èŠ‚ï¼Ÿ",
                        options: ["æ˜¥æœ«", "å¤æœ«", "ç§‹æœ«", "å†¬æœ«"],
                        correct: 3,
                        knowledge: "äº¥æœˆä¸ºå†œå†åæœˆï¼Œæ˜¯å†¬å­£çš„æœ€åä¸€ä¸ªæœˆï¼Œé˜´æ°”æç››ã€‚",
                        extraType: "seasons"
                    },
                    {
                        question: "ä»¥ä¸‹æ˜¯æ˜¥å­£æœˆä»½çš„æ˜¯ï¼Ÿ",
                        options: ["å·³åˆæœª", "å¯…å¯è¾°", "ç”³é…‰æˆŒ", "äº¥å­ä¸‘"],
                        correct: 1,
                        knowledge: "å¯…å¯è¾°ä¸ºæ˜¥å­£ä¸‰ä¸ªæœˆã€‚å¯…ä¸ºæ­£æœˆï¼Œå¯ä¸ºäºŒæœˆï¼Œè¾°ä¸ºä¸‰æœˆã€‚",
                        extraType: "seasons"
                    }
                ]
            },
            {
                id: 3,
                title: "äº”è¡Œç”Ÿå…‹",
                icon: "ğŸ”„",
                questions: [
                    {
                        question: "é‡‘ç”Ÿä»€ä¹ˆï¼Ÿ",
                        options: ["æœ¨", "ç«", "æ°´", "åœŸ"],
                        correct: 2,
                        knowledge: "é‡‘ç”Ÿæ°´ã€‚é‡‘å±ç†”åŒ–åå˜æˆæ¶²æ€ï¼Œå¦‚é‡‘èƒ½åŒ–ä¸ºæ°´ï¼Œæ•…é‡‘ç”Ÿæ°´ã€‚",
                        extraType: "fiveElements"
                    },
                    {
                        question: "æœ¨ç”Ÿä»€ä¹ˆï¼Ÿ",
                        options: ["åœŸ", "ç«", "é‡‘", "æ°´"],
                        correct: 1,
                        knowledge: "æœ¨ç”Ÿç«ã€‚æœ¨æŸ´å¯ä»¥ç‡ƒçƒ§ç”Ÿç«ï¼Œæ•…æœ¨ç”Ÿç«ã€‚",
                        extraType: "fiveElements"
                    },
                    {
                        question: "æ°´ç”Ÿä»€ä¹ˆï¼Ÿ",
                        options: ["é‡‘", "æœ¨", "ç«", "åœŸ"],
                        correct: 1,
                        knowledge: "æ°´ç”Ÿæœ¨ã€‚æ°´æ»‹æ¶¦ä¸‡ç‰©ï¼Œè‰æœ¨å¾—ä»¥ç”Ÿé•¿ï¼Œæ•…æ°´ç”Ÿæœ¨ã€‚",
                        extraType: "fiveElements"
                    },
                    {
                        question: "ç«å…‹ä»€ä¹ˆï¼Ÿ",
                        options: ["é‡‘", "æœ¨", "æ°´", "åœŸ"],
                        correct: 0,
                        knowledge: "ç«å…‹é‡‘ã€‚ç«èƒ½ç†”åŒ–é‡‘å±ï¼Œæ•…ç«å…‹é‡‘ã€‚",
                        extraType: "fiveElements"
                    },
                    {
                        question: "åœŸå…‹ä»€ä¹ˆï¼Ÿ",
                        options: ["æœ¨", "ç«", "é‡‘", "æ°´"],
                        correct: 3,
                        knowledge: "åœŸå…‹æ°´ã€‚åœŸèƒ½é˜»æŒ¡æ°´çš„æµåŠ¨ï¼Œå¦‚å ¤åé˜²æ°´ï¼Œæ•…åœŸå…‹æ°´ã€‚",
                        extraType: "fiveElements"
                    }
                ]
            },
            {
                id: 4,
                title: "å¤©å¹²é˜´é˜³",
                icon: "âš–ï¸",
                questions: [
                    {
                        question: "ç”²æ˜¯é˜³å¹²è¿˜æ˜¯é˜´å¹²ï¼Ÿ",
                        options: ["é˜³å¹²", "é˜´å¹²", "ä¸­æ€§", "ä¸ç¡®å®š"],
                        correct: 0,
                        knowledge: "ç”²ä¸ºé˜³å¹²ã€‚ç”²ä¸™æˆŠåºšå£¬çš†ä¸ºé˜³å¹²ã€‚",
                        extraType: "tenStems"
                    },
                    {
                        question: "ä¹™æ˜¯é˜³å¹²è¿˜æ˜¯é˜´å¹²ï¼Ÿ",
                        options: ["é˜³å¹²", "é˜´å¹²", "ä¸­æ€§", "ä¸ç¡®å®š"],
                        correct: 1,
                        knowledge: "ä¹™ä¸ºé˜´å¹²ã€‚ä¹™ä¸å·±è¾›ç™¸çš†ä¸ºé˜´å¹²ã€‚",
                        extraType: "tenStems"
                    },
                    {
                        question: "ä¸™æ˜¯é˜³å¹²è¿˜æ˜¯é˜´å¹²ï¼Ÿ",
                        options: ["é˜³å¹²", "é˜´å¹²", "ä¸­æ€§", "ä¸ç¡®å®š"],
                        correct: 0,
                        knowledge: "ä¸™ä¸ºé˜³å¹²ã€‚ç”²ä¸™æˆŠåºšå£¬çš†ä¸ºé˜³å¹²ã€‚",
                        extraType: "tenStems"
                    },
                    {
                        question: "ä¸æ˜¯é˜³å¹²è¿˜æ˜¯é˜´å¹²ï¼Ÿ",
                        options: ["é˜³å¹²", "é˜´å¹²", "ä¸­æ€§", "ä¸ç¡®å®š"],
                        correct: 1,
                        knowledge: "ä¸ä¸ºé˜´å¹²ã€‚ä¹™ä¸å·±è¾›ç™¸çš†ä¸ºé˜´å¹²ã€‚",
                        extraType: "tenStems"
                    },
                    {
                        question: "åºšæ˜¯é˜³å¹²è¿˜æ˜¯é˜´å¹²ï¼Ÿ",
                        options: ["é˜³å¹²", "é˜´å¹²", "ä¸­æ€§", "ä¸ç¡®å®š"],
                        correct: 0,
                        knowledge: "åºšä¸ºé˜³å¹²ã€‚ç”²ä¸™æˆŠåºšå£¬çš†ä¸ºé˜³å¹²ã€‚",
                        extraType: "tenStems"
                    },
                    {
                        question: "è¾›æ˜¯é˜³å¹²è¿˜æ˜¯é˜´å¹²ï¼Ÿ",
                        options: ["é˜³å¹²", "é˜´å¹²", "ä¸­æ€§", "ä¸ç¡®å®š"],
                        correct: 1,
                        knowledge: "è¾›ä¸ºé˜´å¹²ã€‚ä¹™ä¸å·±è¾›ç™¸çš†ä¸ºé˜´å¹²ã€‚",
                        extraType: "tenStems"
                    },
                    {
                        question: "å£¬æ˜¯é˜³å¹²è¿˜æ˜¯é˜´å¹²ï¼Ÿ",
                        options: ["é˜³å¹²", "é˜´å¹²", "ä¸­æ€§", "ä¸ç¡®å®š"],
                        correct: 0,
                        knowledge: "å£¬ä¸ºé˜³å¹²ã€‚ç”²ä¸™æˆŠåºšå£¬çš†ä¸ºé˜³å¹²ã€‚",
                        extraType: "tenStems"
                    },
                    {
                        question: "ç™¸æ˜¯é˜³å¹²è¿˜æ˜¯é˜´å¹²ï¼Ÿ",
                        options: ["é˜³å¹²", "é˜´å¹²", "ä¸­æ€§", "ä¸ç¡®å®š"],
                        correct: 1,
                        knowledge: "ç™¸ä¸ºé˜´å¹²ã€‚ä¹™ä¸å·±è¾›ç™¸çš†ä¸ºé˜´å¹²ã€‚",
                        extraType: "tenStems"
                    }
                ]
            },
            {
                id: 5,
                title: "åœ°æ”¯é˜´é˜³",
                icon: "ğŸ”„",
                questions: [
                    {
                        question: "å­æ˜¯é˜³è¿˜æ˜¯é˜´ï¼Ÿ",
                        options: ["é˜³", "é˜´", "ä¸­æ€§", "ä¸ç¡®å®š"],
                        correct: 0,
                        knowledge: "å­ä¸ºé˜³æ°´ã€‚ä¼ ç»Ÿå‘½ç†å­¦ä¸­ï¼Œå­ã€å¯…ã€è¾°ã€åˆã€ç”³ã€æˆŒä¸ºé˜³æ”¯ã€‚å­æœˆä¸ºå†œå†åä¸€æœˆï¼Œé˜³æ°”åˆç”Ÿã€‚",
                        extraType: "twelveBranches"
                    },
                    {
                        question: "å¯…æ˜¯é˜³è¿˜æ˜¯é˜´ï¼Ÿ",
                        options: ["é˜³", "é˜´", "ä¸­æ€§", "ä¸ç¡®å®š"],
                        correct: 0,
                        knowledge: "å¯…ä¸ºé˜³æœ¨ï¼Œä»£è¡¨æ˜¥å­£é˜³æ°”å‹ƒå‘ä¹‹æ—¶ã€‚",
                        extraType: "twelveBranches"
                    },
                    {
                        question: "ä»¥ä¸‹å“ªäº›å±äºé˜³æ”¯ï¼Ÿ",
                        options: ["å­ä¸‘", "å¯…å¯", "å¯…ç”³", "å¯æˆŒ"],
                        correct: 2,
                        knowledge: "å¯…è¾°å·³ç”³æˆŒäº¥ä¸ºé˜³æ”¯ï¼Œå­ä¸‘å¯åˆæœªé…‰ä¸ºé˜´æ”¯ã€‚",
                        extraType: "twelveBranches"
                    },
                    {
                        question: "ä»¥ä¸‹å“ªäº›å±äºé˜´æ”¯ï¼Ÿ",
                        options: ["å¯…å¯", "ä¸‘å¯", "è¾°å·³", "ç”³äº¥"],
                        correct: 1,
                        knowledge: "ä¼ ç»Ÿå‘½ç†å­¦ä¸­ï¼Œé˜³æ”¯ä¸ºï¼šå­ã€å¯…ã€è¾°ã€åˆã€ç”³ã€æˆŒï¼›é˜´æ”¯ä¸ºï¼šä¸‘ã€å¯ã€å·³ã€æœªã€é…‰ã€äº¥ã€‚ä¸‘å’Œå¯éƒ½æ˜¯é˜´æ”¯ã€‚",
                        extraType: "twelveBranches"
                    },
                    {
                        question: "ç”³é…‰åˆ†åˆ«å±äºä»€ä¹ˆé˜´é˜³ï¼Ÿ",
                        options: ["é˜³é˜³", "é˜´é˜´", "é˜´é˜³", "ä¸ç¡®å®š"],
                        correct: 2,
                        knowledge: "ç”³ä¸ºé˜³é‡‘ï¼Œç§‹é«˜æ°”çˆ½ï¼›é…‰ä¸ºé˜´é‡‘ï¼Œé‡‘ç§‹ç¡•æœã€‚ä¼ ç»Ÿå‘½ç†å­¦ä¸­ï¼Œå­ã€å¯…ã€è¾°ã€åˆã€ç”³ã€æˆŒä¸ºé˜³æ”¯ï¼Œä¸‘ã€å¯ã€å·³ã€æœªã€é…‰ã€äº¥ä¸ºé˜´æ”¯ã€‚",
                        extraType: "twelveBranches"
                    },
                    {
                        question: "åˆæ˜¯é˜³è¿˜æ˜¯é˜´ï¼Ÿ",
                        options: ["é˜³", "é˜´", "ä¸­æ€§", "ä¸ç¡®å®š"],
                        correct: 1,
                        knowledge: "åˆä¸ºé˜´æ”¯ã€‚é˜³æ”¯ä¸ºï¼šå­ã€å¯…ã€è¾°ã€åˆã€ç”³ã€æˆŒï¼›é˜´æ”¯ä¸ºï¼šä¸‘ã€å¯ã€å·³ã€æœªã€é…‰ã€äº¥ã€‚",
                        extraType: "twelveBranches"
                    },
                    {
                        question: "äº¥æ˜¯é˜³è¿˜æ˜¯é˜´ï¼Ÿ",
                        options: ["é˜³", "é˜´", "ä¸­æ€§", "ä¸ç¡®å®š"],
                        correct: 0,
                        knowledge: "äº¥ä¸ºé˜³æ”¯ã€‚é˜³æ”¯ä¸ºï¼šå­ã€å¯…ã€è¾°ã€åˆã€ç”³ã€æˆŒï¼›é˜´æ”¯ä¸ºï¼šä¸‘ã€å¯ã€å·³ã€æœªã€é…‰ã€äº¥ã€‚",
                        extraType: "twelveBranches"
                    }
                ]
            },
            {
                id: 6,
                title: "å¤©å¹²åˆåŒ–",
                icon: "ğŸ¤",
                questions: [
                    {
                        question: "ç”²å·±åˆåŒ–ä¸ºä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["é‡‘", "æœ¨", "æ°´", "åœŸ"],
                        correct: 3,
                        knowledge: "ç”²å·±åˆåŒ–åœŸã€‚ç”²ä¸ºé˜³æœ¨ï¼Œå·±ä¸ºé˜´åœŸï¼Œæœ¨å…‹åœŸè€ŒåŒ–åœŸã€‚",
                        extraType: "stemCombination"
                    },
                    {
                        question: "ä¹™åºšåˆåŒ–ä¸ºä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["é‡‘", "æœ¨", "æ°´", "ç«"],
                        correct: 0,
                        knowledge: "ä¹™åºšåˆåŒ–é‡‘ã€‚ä¹™ä¸ºé˜´æœ¨ï¼Œåºšä¸ºé˜³é‡‘ï¼Œæœ¨å—å…‹è€ŒåŒ–é‡‘ã€‚",
                        extraType: "stemCombination"
                    },
                    {
                        question: "ä¸™è¾›åˆåŒ–ä¸ºä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["ç«", "æ°´", "é‡‘", "åœŸ"],
                        correct: 1,
                        knowledge: "ä¸™è¾›åˆåŒ–æ°´ã€‚ä¸™ä¸ºé˜³ç«ï¼Œè¾›ä¸ºé˜´é‡‘ï¼Œç«å…‹é‡‘è€ŒåŒ–æ°´ã€‚",
                        extraType: "stemCombination"
                    },
                    {
                        question: "ä¸å£¬åˆåŒ–ä¸ºä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["æ°´", "ç«", "æœ¨", "åœŸ"],
                        correct: 2,
                        knowledge: "ä¸å£¬åˆåŒ–æœ¨ã€‚ä¸ä¸ºé˜´ç«ï¼Œå£¬ä¸ºé˜³æ°´ï¼Œæ°´å…‹ç«è€ŒåŒ–æœ¨ã€‚",
                        extraType: "stemCombination"
                    },
                    {
                        question: "æˆŠç™¸åˆåŒ–ä¸ºä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["åœŸ", "é‡‘", "æ°´", "ç«"],
                        correct: 3,
                        knowledge: "æˆŠç™¸åˆåŒ–ç«ã€‚æˆŠä¸ºé˜³åœŸï¼Œç™¸ä¸ºé˜´æ°´ï¼ŒåœŸå…‹æ°´è€ŒåŒ–ç«ã€‚",
                        extraType: "stemCombination"
                    }
                ]
            },
            {
                id: 7,
                title: "åœ°æ”¯ä¸‰åˆ",
                icon: "ğŸ”—",
                questions: [
                    {
                        question: "ç”³å­è¾°ä¸‰åˆåŒ–ä¸ºä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["é‡‘", "æœ¨", "æ°´", "ç«"],
                        correct: 2,
                        knowledge: "ç”³å­è¾°ä¸‰åˆæ°´å±€ã€‚ç”³ä¸ºé‡‘ï¼Œå­ä¸ºæ°´ï¼Œè¾°ä¸ºåœŸï¼Œé‡‘æ°´ç›¸ç”Ÿè€ŒåŒ–æ°´ã€‚",
                        extraType: "branchTripleCombination"
                    },
                    {
                        question: "å·³é…‰ä¸‘ä¸‰åˆåŒ–ä¸ºä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["é‡‘", "æœ¨", "æ°´", "ç«"],
                        correct: 0,
                        knowledge: "å·³é…‰ä¸‘ä¸‰åˆé‡‘å±€ã€‚å·³ä¸ºç«ï¼Œé…‰ä¸ºé‡‘ï¼Œä¸‘ä¸ºåœŸï¼Œç«åœŸé‡‘ç›¸ç”Ÿè€ŒåŒ–é‡‘ã€‚",
                        extraType: "branchTripleCombination"
                    },
                    {
                        question: "äº¥å¯æœªä¸‰åˆåŒ–ä¸ºä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["é‡‘", "æœ¨", "æ°´", "ç«"],
                        correct: 1,
                        knowledge: "äº¥å¯æœªä¸‰åˆæœ¨å±€ã€‚äº¥ä¸ºæ°´ï¼Œå¯ä¸ºæœ¨ï¼Œæœªä¸ºåœŸï¼Œæ°´æœ¨ç›¸ç”Ÿè€ŒåŒ–æœ¨ã€‚",
                        extraType: "branchTripleCombination"
                    },
                    {
                        question: "å¯…åˆæˆŒä¸‰åˆåŒ–ä¸ºä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["é‡‘", "æœ¨", "æ°´", "ç«"],
                        correct: 3,
                        knowledge: "å¯…åˆæˆŒä¸‰åˆç«å±€ã€‚å¯…ä¸ºæœ¨ï¼Œåˆä¸ºç«ï¼ŒæˆŒä¸ºåœŸï¼Œæœ¨ç«åœŸç›¸ç”Ÿè€ŒåŒ–ç«ã€‚",
                        extraType: "branchTripleCombination"
                    }
                ]
            },
            {
                id: 8,
                title: "åœ°æ”¯å…­åˆ",
                icon: "â¤ï¸",
                questions: [
                    {
                        question: "å­ä¸‘ç›¸åˆï¼ŒåˆåŒ–ä¸ºä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["é‡‘", "æœ¨", "æ°´", "åœŸ"],
                        correct: 3,
                        knowledge: "å­ä¸‘ç›¸åˆã€‚å­ä¸ºæ°´ï¼Œä¸‘ä¸ºåœŸï¼ŒåœŸå…‹æ°´ï¼Œç›¸åˆåŒ–åœŸã€‚",
                        extraType: "branchSixCombination"
                    },
                    {
                        question: "å¯…äº¥ç›¸åˆï¼ŒåˆåŒ–ä¸ºä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["é‡‘", "æœ¨", "æ°´", "åœŸ"],
                        correct: 1,
                        knowledge: "å¯…äº¥ç›¸åˆã€‚å¯…ä¸ºæœ¨ï¼Œäº¥ä¸ºæ°´ï¼Œæ°´ç”Ÿæœ¨ï¼Œç›¸åˆåŒ–æœ¨ã€‚",
                        extraType: "branchSixCombination"
                    },
                    {
                        question: "å¯æˆŒç›¸åˆï¼ŒåˆåŒ–ä¸ºä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["é‡‘", "æœ¨", "æ°´", "ç«"],
                        correct: 3,
                        knowledge: "å¯æˆŒç›¸åˆã€‚å¯ä¸ºæœ¨ï¼ŒæˆŒä¸ºåœŸï¼Œæœ¨å…‹åœŸï¼Œç›¸åˆåŒ–ç«ã€‚",
                        extraType: "branchSixCombination"
                    },
                    {
                        question: "è¾°é…‰ç›¸åˆï¼ŒåˆåŒ–ä¸ºä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["é‡‘", "æœ¨", "æ°´", "åœŸ"],
                        correct: 0,
                        knowledge: "è¾°é…‰ç›¸åˆã€‚è¾°ä¸ºåœŸï¼Œé…‰ä¸ºé‡‘ï¼ŒåœŸç”Ÿé‡‘ï¼Œç›¸åˆåŒ–é‡‘ã€‚",
                        extraType: "branchSixCombination"
                    },
                    {
                        question: "å·³ç”³ç›¸åˆï¼ŒåˆåŒ–ä¸ºä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["é‡‘", "æœ¨", "æ°´", "åœŸ"],
                        correct: 2,
                        knowledge: "å·³ç”³ç›¸åˆã€‚å·³ä¸ºç«ï¼Œç”³ä¸ºé‡‘ï¼Œç«å…‹é‡‘ï¼Œç›¸åˆåŒ–æ°´ã€‚",
                        extraType: "branchSixCombination"
                    },
                    {
                        question: "åˆæœªç›¸åˆï¼ŒåˆåŒ–ä¸ºä»€ä¹ˆäº”è¡Œï¼Ÿ",
                        options: ["é‡‘", "æœ¨", "æ°´", "åœŸ"],
                        correct: 3,
                        knowledge: "åˆæœªç›¸åˆã€‚åˆä¸ºç«ï¼Œæœªä¸ºåœŸï¼Œç«ç”ŸåœŸï¼Œç›¸åˆåŒ–åœŸã€‚",
                        extraType: "branchSixCombination"
                    }
                ]
            },
            {
                id: 9,
                title: "åœ°æ”¯ç›¸å†²",
                icon: "âš¡",
                questions: [
                    {
                        question: "å­åˆç›¸å†²ï¼Œæ˜¯å› ä¸ºäº”è¡Œä»€ä¹ˆå…³ç³»ï¼Ÿ",
                        options: ["é‡‘æœ¨", "æœ¨åœŸ", "æ°´ç«", "åœŸé‡‘"],
                        correct: 2,
                        knowledge: "å­åˆç›¸å†²ã€‚å­ä¸ºæ°´ï¼Œåˆä¸ºç«ï¼Œæ°´ç«ç›¸å†²ã€‚",
                        extraType: null
                    },
                    {
                        question: "å¯…ç”³ç›¸å†²ï¼Œæ˜¯å› ä¸ºäº”è¡Œä»€ä¹ˆå…³ç³»ï¼Ÿ",
                        options: ["é‡‘æœ¨", "æœ¨åœŸ", "æ°´ç«", "åœŸé‡‘"],
                        correct: 0,
                        knowledge: "å¯…ç”³ç›¸å†²ã€‚å¯…ä¸ºæœ¨ï¼Œç”³ä¸ºé‡‘ï¼Œé‡‘æœ¨ç›¸å†²ã€‚",
                        extraType: null
                    },
                    {
                        question: "å¯é…‰ç›¸å†²ï¼Œæ˜¯å› ä¸ºäº”è¡Œä»€ä¹ˆå…³ç³»ï¼Ÿ",
                        options: ["é‡‘æœ¨", "æœ¨åœŸ", "æ°´ç«", "åœŸé‡‘"],
                        correct: 0,
                        knowledge: "å¯é…‰ç›¸å†²ã€‚å¯ä¸ºæœ¨ï¼Œé…‰ä¸ºé‡‘ï¼Œé‡‘æœ¨ç›¸å†²ã€‚",
                        extraType: null
                    },
                    {
                        question: "å·³äº¥ç›¸å†²ï¼Œæ˜¯å› ä¸ºäº”è¡Œä»€ä¹ˆå…³ç³»ï¼Ÿ",
                        options: ["é‡‘æœ¨", "æœ¨åœŸ", "æ°´ç«", "åœŸé‡‘"],
                        correct: 2,
                        knowledge: "å·³äº¥ç›¸å†²ã€‚å·³ä¸ºç«ï¼Œäº¥ä¸ºæ°´ï¼Œæ°´ç«ç›¸å†²ã€‚",
                        extraType: null
                    },
                    {
                        question: "è¾°æˆŒç›¸å†²ï¼Œæ˜¯å› ä¸ºäº”è¡Œä»€ä¹ˆå…³ç³»ï¼Ÿ",
                        options: ["é‡‘æœ¨", "æœ¨åœŸ", "æ°´ç«", "åœŸåœŸ"],
                        correct: 3,
                        knowledge: "è¾°æˆŒç›¸å†²ã€‚è¾°ä¸ºåœŸï¼ŒæˆŒä¸ºåœŸï¼ŒåœŸä¸åœŸå†²ã€‚",
                        extraType: null
                    }
                ]
            },
            {
                id: 10,
                title: "åç¥åŸºç¡€",
                icon: "ğŸ­",
                questions: [
                    {
                        question: "ç”²æœ¨æ—¥å¹²ï¼Œè§è¾›é‡‘ï¼Œå±äºä»€ä¹ˆï¼Ÿ",
                        options: ["æ­£å®˜", "ä¸ƒæ€", "åè´¢", "æ­£è´¢"],
                        correct: 0,
                        knowledge: "ç”²æœ¨æ—¥å¹²è§è¾›é‡‘ï¼Œç”²ä¸ºé˜³æœ¨ï¼Œè¾›ä¸ºé˜´é‡‘ï¼Œé˜³è§é˜´ï¼Œä¸”é‡‘å…‹æœ¨ï¼Œä¸ºæ­£å®˜ã€‚",
                        extraType: null
                    },
                    {
                        question: "ç”²æœ¨æ—¥å¹²ï¼Œè§åºšé‡‘ï¼Œå±äºä»€ä¹ˆï¼Ÿ",
                        options: ["æ­£å®˜", "ä¸ƒæ€", "åè´¢", "æ­£è´¢"],
                        correct: 1,
                        knowledge: "ç”²æœ¨æ—¥å¹²è§åºšé‡‘ï¼Œç”²ä¸ºé˜³æœ¨ï¼Œåºšä¸ºé˜³é‡‘ï¼Œé˜³è§é˜³ï¼Œä¸”é‡‘å…‹æœ¨ï¼Œä¸ºä¸ƒæ€ã€‚",
                        extraType: null
                    },
                    {
                        question: "ç”²æœ¨æ—¥å¹²ï¼Œè§å·±åœŸï¼Œå±äºä»€ä¹ˆï¼Ÿ",
                        options: ["æ­£è´¢", "åè´¢", "ä¼¤å®˜", "é£Ÿç¥"],
                        correct: 0,
                        knowledge: "ç”²æœ¨æ—¥å¹²è§å·±åœŸï¼Œç”²ä¸ºé˜³æœ¨ï¼Œå·±ä¸ºé˜´åœŸï¼Œé˜³è§é˜´ï¼Œä¸”æœ¨å…‹åœŸï¼Œä¸ºæ­£è´¢ã€‚",
                        extraType: null
                    },
                    {
                        question: "ç”²æœ¨æ—¥å¹²ï¼Œè§æˆŠåœŸï¼Œå±äºä»€ä¹ˆï¼Ÿ",
                        options: ["æ­£è´¢", "åè´¢", "ä¼¤å®˜", "é£Ÿç¥"],
                        correct: 1,
                        knowledge: "ç”²æœ¨æ—¥å¹²è§æˆŠåœŸï¼Œç”²ä¸ºé˜³æœ¨ï¼ŒæˆŠä¸ºé˜³åœŸï¼Œé˜³è§é˜³ï¼Œä¸”æœ¨å…‹åœŸï¼Œä¸ºåè´¢ã€‚",
                        extraType: null
                    },
                    {
                        question: "ç”²æœ¨æ—¥å¹²ï¼Œè§ä¸™ç«ï¼Œå±äºä»€ä¹ˆï¼Ÿ",
                        options: ["æ­£å®˜", "ä¸ƒæ€", "ä¼¤å®˜", "é£Ÿç¥"],
                        correct: 3,
                        knowledge: "ç”²æœ¨æ—¥å¹²è§ä¸™ç«ï¼Œç”²ä¸ºé˜³æœ¨ï¼Œä¸™ä¸ºé˜³ç«ï¼Œé˜³è§é˜³ï¼Œä¸”æœ¨ç”Ÿç«ï¼Œä¸ºé£Ÿç¥ã€‚",
                        extraType: null
                    },
                    {
                        question: "ç”²æœ¨æ—¥å¹²ï¼Œè§ä¸ç«ï¼Œå±äºä»€ä¹ˆï¼Ÿ",
                        options: ["æ­£å®˜", "ä¸ƒæ€", "ä¼¤å®˜", "é£Ÿç¥"],
                        correct: 2,
                        knowledge: "ç”²æœ¨æ—¥å¹²è§ä¸ç«ï¼Œç”²ä¸ºé˜³æœ¨ï¼Œä¸ä¸ºé˜´ç«ï¼Œé˜³è§é˜´ï¼Œä¸”æœ¨ç”Ÿç«ï¼Œä¸ºä¼¤å®˜ã€‚",
                        extraType: null
                    }
                ]
            },
            {
                id: 11,
                title: "ç¥ç…åŸºç¡€",
                icon: "ğŸŒŸ",
                questions: [
                    {
                        question: "ç¾Šåˆƒä¸»ä»€ä¹ˆï¼Ÿ",
                        options: ["è´¢å¯Œ", "å¥åº·", "å‡¶ç¥", "å‰ç¥"],
                        correct: 2,
                        knowledge: "ç¾Šåˆƒæ˜¯å‡¶ç¥ï¼Œä¸»åˆšå¼ºå¥½æ–—ï¼Œä½†ä¹Ÿä¸»èƒ†å¤§æœ‰ä½œä¸ºã€‚",
                        extraType: null
                    },
                    {
                        question: "åç›–ä¸»ä»€ä¹ˆï¼Ÿ",
                        options: ["è´¢å¯Œ", "è‰ºæœ¯å®—æ•™", "å®˜è¿", "å¥åº·"],
                        correct: 1,
                        knowledge: "åç›–ä¸»è‰ºæœ¯å¤©èµ‹ï¼Œåˆ©å®—æ•™ç„å­¦ï¼Œåˆ©å­¦æœ¯ç ”ç©¶ã€‚",
                        extraType: null
                    },
                    {
                        question: "æ–‡æ˜Œæ˜Ÿä¸»ä»€ä¹ˆï¼Ÿ",
                        options: ["è´¢å¯Œ", "æ–‡å­¦è‰ºæœ¯", "å®˜è¿", "å¥åº·"],
                        correct: 1,
                        knowledge: "æ–‡æ˜Œæ˜Ÿä¸»æ–‡å­¦æ‰åï¼Œåˆ©è¯»ä¹¦è€ƒè¯•ï¼Œåˆ©äºå­¦è¿ã€‚",
                        extraType: null
                    },
                    {
                        question: "æ¡ƒèŠ±æ˜Ÿä¸»ä»€ä¹ˆï¼Ÿ",
                        options: ["è´¢å¯Œ", "äººç¼˜é­…åŠ›", "å®˜è¿", "å¥åº·"],
                        correct: 1,
                        knowledge: "æ¡ƒèŠ±æ˜Ÿä¸»äººç¼˜é­…åŠ›ï¼Œåˆ©å¼‚æ€§ç¼˜ï¼Œä¹Ÿä¸»é£æµã€‚",
                        extraType: null
                    }
                ]
            },
            {
                id: 12,
                title: "ç»¼åˆåº”ç”¨",
                icon: "ğŸ“",
                questions: [
                    {
                        question: "ç”²æœ¨æ—¥å¹²ï¼Œç”Ÿäºå¯…æœˆï¼Œå››æŸ±å¤šæ°´å¤šæœ¨ï¼Œå±äºï¼Ÿ",
                        options: ["èº«å¼±", "èº«å¼º", "ä¸­å’Œ", "åå¼±"],
                        correct: 1,
                        knowledge: "ç”²æœ¨ç”Ÿäºå¯…æœˆï¼Œæœ¨å½“ä»¤ï¼Œåˆå¤šæ°´æœ¨å¸®æ‰¶ï¼Œå±äºèº«å¼ºã€‚",
                        extraType: null
                    },
                    {
                        question: "èº«å¼ºå–œä»€ä¹ˆï¼Ÿ",
                        options: ["å°æ˜Ÿ", "æ¯”åŠ«", "é£Ÿä¼¤è´¢å®˜", "æ¯”åŠ«å°æ˜Ÿ"],
                        correct: 2,
                        knowledge: "èº«å¼ºå–œé£Ÿä¼¤è´¢å®˜ï¼Œå³å–œæ³„ã€å–œå…‹ã€å–œåˆ†ï¼Œä¸å–œæ¬¢ç”Ÿæ‰¶ã€‚",
                        extraType: null
                    },
                    {
                        question: "å…«å­—æœ€é‡è§†ä»€ä¹ˆï¼Ÿ",
                        options: ["å¹´æŸ±", "æœˆæŸ±", "æ—¥æŸ±", "å››æŸ±å¹³è¡¡"],
                        correct: 3,
                        knowledge: "å…«å­—æœ€é‡è§†å››æŸ±å¹³è¡¡ï¼Œäº”è¡Œä¸­å’Œï¼Œä¸åä¸å€šä¸ºä¸Šã€‚",
                        extraType: null
                    },
                    {
                        question: "å­åˆå¯é…‰è¢«ç§°ä¸ºä»€ä¹ˆï¼Ÿ",
                        options: ["å››åº“", "å››å­Ÿ", "å››æ­£", "å››é©¬"],
                        correct: 2,
                        knowledge: "å­åˆå¯é…‰ä¸ºå››æ­£åœ°æ”¯ï¼Œä»£è¡¨å››ä¸ªæ–¹ä½çš„æ­£ä¸­ã€‚",
                        extraType: null
                    },
                    {
                        question: "è¾°æˆŒä¸‘æœªè¢«ç§°ä¸ºä»€ä¹ˆï¼Ÿ",
                        options: ["å››åº“", "å››å­Ÿ", "å››æ­£", "å››é©¬"],
                        correct: 0,
                        knowledge: "è¾°æˆŒä¸‘æœªä¸ºå››åº“åœ°æ”¯ï¼Œä¹Ÿç§°ä¸ºå››å¢“ã€‚",
                        extraType: null
                    }
                ]
            }
        ];

        // æ¸¸æˆçŠ¶æ€
        let userProgress = JSON.parse(localStorage.getItem('destinyProgress')) || {
            totalPoints: 0,
            levelsCompleted: 0,
            correctAnswers: 0,
            totalAnswers: 0,
            completedLevels: []
        };

        let currentLevel = null;
        let currentQuestionIndex = 0;
        let levelQuestions = [];
        let currentScore = 0;

        // åˆå§‹åŒ–å…³å¡ç½‘æ ¼
        function initLevelGrid() {
            const grid = document.getElementById('levelGrid');
            grid.innerHTML = '';

            levels.forEach(level => {
                const isCompleted = userProgress.completedLevels.includes(level.id);
                let stars = '';

                if (isCompleted) {
                    stars = 'â­â­â­';
                } else {
                    stars = '<span class="star empty">â­</span><span class="star empty">â­</span><span class="star empty">â­</span>';
                }

                const card = document.createElement('div');
                card.className = 'level-card';
                card.onclick = () => startLevel(level.id);

                card.innerHTML = `
                    <div class="level-icon">${level.icon}</div>
                    <div class="level-title">${level.title}</div>
                    <div class="level-stars">${stars}</div>
                `;

                grid.appendChild(card);
            });
        }

        // æ›´æ–°è¿›åº¦æ˜¾ç¤º
        function updateProgressDisplay() {
            document.getElementById('totalPoints').textContent = userProgress.totalPoints;
            document.getElementById('levelsCompleted').textContent = `${userProgress.levelsCompleted}/${levels.length}`;

            const accuracy = userProgress.totalAnswers > 0 
                ? Math.round((userProgress.correctAnswers / userProgress.totalAnswers) * 100) 
                : 0;
            document.getElementById('accuracy').textContent = `${accuracy}%`;
        }

        // å¼€å§‹å…³å¡
        function startLevel(levelId) {
            currentLevel = levels.find(l => l.id === levelId);
            
            // éšæœºé€‰æ‹©5é“é¢˜ï¼Œå®ç°çœŸæ­£çš„éšæœºæ€§
            const allQuestions = currentLevel.questions;
            const shuffledQuestions = [...allQuestions].sort(() => Math.random() - 0.5);
            levelQuestions = shuffledQuestions.slice(0, 5);
            
            currentQuestionIndex = 0;
            currentScore = 0;

            document.getElementById('levelGrid').style.display = 'none';
            document.getElementById('quizContainer').classList.add('active');
            document.getElementById('resultScreen').classList.remove('show');

            showQuestion();
        }

        // æ˜¾ç¤ºé—®é¢˜
        function showQuestion() {
            const question = levelQuestions[currentQuestionIndex];

            document.getElementById('questionText').textContent = `${currentQuestionIndex + 1}. ${question.question}`;

            const optionsGrid = document.getElementById('optionsGrid');
            optionsGrid.innerHTML = '';

            question.options.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = option;
                btn.onclick = () => selectOption(index, question);
                optionsGrid.appendChild(btn);
            });

            // æ›´æ–°è¿›åº¦æ¡
            const progress = ((currentQuestionIndex) / levelQuestions.length) * 100;
            document.getElementById('quizProgressBar').style.width = `${progress}%`;

            // éšè—åé¦ˆå’ŒçŸ¥è¯†å¡ç‰‡
            document.getElementById('feedback').classList.remove('show');
            document.getElementById('knowledgeCard').classList.remove('show');
            document.getElementById('nextBtn').classList.remove('show');

            // å¯ç”¨æ‰€æœ‰é€‰é¡¹æŒ‰é’®
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(btn => {
                btn.disabled = false;
                btn.classList.remove('correct', 'wrong');
            });
        }

        // é€‰æ‹©é€‰é¡¹
        function selectOption(selectedIndex, question) {
            const buttons = document.querySelectorAll('.option-btn');
            const feedback = document.getElementById('feedback');
            const knowledgeCard = document.getElementById('knowledgeCard');
            const knowledgeContent = document.getElementById('knowledgeContent');
            const knowledgeExtra = document.getElementById('knowledgeExtra');

            // ç¦ç”¨æ‰€æœ‰æŒ‰é’®
            buttons.forEach(btn => btn.disabled = true);

            userProgress.totalAnswers++;

            if (selectedIndex === question.correct) {
                buttons[selectedIndex].classList.add('correct');
                feedback.textContent = 'âœ“ æ­£ç¡®!';
                feedback.className = 'feedback correct show';
                currentScore++;
                userProgress.correctAnswers++;
            } else {
                buttons[selectedIndex].classList.add('wrong');
                buttons[question.correct].classList.add('correct');
                feedback.textContent = `âœ— æ­£ç¡®ç­”æ¡ˆæ˜¯: ${question.options[question.correct]}`;
                feedback.className = 'feedback wrong show';
            }

            // æ˜¾ç¤ºçŸ¥è¯†ç‚¹
            knowledgeContent.textContent = question.knowledge;
            knowledgeExtra.innerHTML = generateExtraKnowledge(question.extraType);
            knowledgeCard.classList.add('show');

            // æ˜¾ç¤ºç»§ç»­æŒ‰é’®
            const nextBtn = document.getElementById('nextBtn');
            nextBtn.classList.add('show');

            if (currentQuestionIndex === levelQuestions.length - 1) {
                nextBtn.textContent = 'æŸ¥çœ‹ç»“æœ';
            } else {
                nextBtn.textContent = 'ç»§ç»­';
            }

            saveProgress();
            updateProgressDisplay();
        }

        // ä¸‹ä¸€é¢˜/ç»“æœ
        document.getElementById('nextBtn').onclick = function() {
            if (currentQuestionIndex < levelQuestions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            } else {
                showResult();
            }
        };

        // æ˜¾ç¤ºç»“æœ
        function showResult() {
            const accuracy = Math.round((currentScore / levelQuestions.length) * 100);
            const points = currentScore * 20;

            userProgress.totalPoints += points;

            if (!userProgress.completedLevels.includes(currentLevel.id)) {
                userProgress.completedLevels.push(currentLevel.id);
                userProgress.levelsCompleted++;
            }

            saveProgress();
            updateProgressDisplay();

            let stars, message;

            if (accuracy === 100) {
                stars = 'â­â­â­';
                message = 'å¤ªæ£’äº†!';
            } else if (accuracy >= 80) {
                stars = 'â­â­';
                message = 'å¾ˆä¼˜ç§€!';
            } else if (accuracy >= 60) {
                stars = 'â­';
                message = 'ç»§ç»­åŠªåŠ›!';
            } else {
                stars = '';
                message = 'åŠ æ²¹!';
            }

            document.getElementById('resultStars').textContent = stars;
            document.getElementById('resultMessage').textContent = message;
            document.getElementById('resultScore').textContent = points;
            document.getElementById('resultScreen').classList.add('show');
            document.getElementById('quizContainer').classList.remove('active');
        }

        // ç»§ç»­å­¦ä¹ 
        document.getElementById('continueBtn').onclick = function() {
            document.getElementById('resultScreen').classList.remove('show');
            document.getElementById('levelGrid').style.display = 'grid';
            initLevelGrid();
        };

        // ä¿å­˜è¿›åº¦
        function saveProgress() {
            localStorage.setItem('destinyProgress', JSON.stringify(userProgress));
        }

        // åˆå§‹åŒ–æ¸¸æˆ
        initLevelGrid();
        updateProgressDisplay();
    </script>
</body>
</html>